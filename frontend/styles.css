:root{
  --bg:#0b1020; --panel:#111734; --card:#151d41; --ink:#eef1ff;
  --muted:#9aa3d9; --accent:#7cf; --good:#3fe18f; --bad:#ff6b6b;
  --lock:#7a86b6; --gold:#ffd166; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; background:radial-gradient(1200px 800px at 20% -10%, #1a2458 0%, #0b1020 60%) fixed;
  color:var(--ink); font:16px/1.5 Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
a{color:var(--accent);text-decoration:none}
.container{max-width:1100px;margin:0 auto;padding:20px}
header{display:flex;align-items:center;gap:16px;padding:16px 0}
.logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,#7cf,#b4f1ff); box-shadow:var(--shadow); animation:float 5s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
h1{margin:0;font-size:24px} h2{margin:18px 0 8px}
.grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fill,minmax(230px,1fr))}
.card{
  background:var(--card); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow);
  position:relative; overflow:hidden; border:1px solid rgba(255,255,255,.06);
  transition: transform .15s ease, box-shadow .15s ease, border-color .2s ease;
}
.card:hover{ transform: translateY(-3px); box-shadow:0 16px 36px rgba(0,0,0,.45); border-color: rgba(124,255,255,.25);}
.card .title{font-weight:700;margin-bottom:6px}
.card .meta{color:var(--muted);font-size:13px}
.badge{position:absolute;top:12px;right:12px;padding:4px 8px;border-radius:999px;font-size:12px;background:#1f2a66;color:#cbe7ff;border:1px solid rgba(255,255,255,.1)}
.badge.lock{background:#161b34;color:#ccd1f3;border-color:rgba(255,255,255,.05)}
.badge.done{background:#0f3f2b;color:#b7ffd9;border-color:#2b8b6f}
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  background:linear-gradient(135deg,#6de1ff,#6fffc3);color:#00121b;border:none;
  padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:var(--shadow)
}
.btn.secondary{background:#1b2556;color:#cfe3ff;border:1px solid rgba(255,255,255,.08)}
.btn:disabled{opacity:.6;cursor:not-allowed}
.icon-btn{background:transparent;border:1px solid rgba(255,255,255,.14);padding:8px 10px;border-radius:10px;color:var(--ink);cursor:pointer}
.panel{background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;border:1px solid rgba(255,255,255,.06)}
.lesson-card{padding:14px 16px;border-radius:14px;background:#12193a;border:1px solid rgba(255,255,255,.06);margin:12px 0}
.lesson-card pre{background:#0e1430;padding:10px;border-radius:10px;overflow:auto}
.kbd{display:inline-block;background:#0d1330;border:1px solid rgba(255,255,255,.1);padding:2px 6px;border-radius:8px;color:#c7d2ff;font-size:12px}
.footer{color:#8ea2ff60;font-size:12px;text-align:center;padding:22px 8px}

/* quiz */
.progress{height:8px;background:#0f1536;border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,.06)}
.progress>div{height:100%;background:linear-gradient(90deg,#6de1ff,#6fffc3)}
.opt{
  background:#101740;border:1px solid rgba(255,255,255,.07);padding:10px 12px;border-radius:12px;cursor:pointer;
  margin:8px 0;transition:transform .08s ease, border-color .15s ease, box-shadow .15s ease;
}
.opt:hover{ transform: translateY(-1px); border-color:#7cf6; box-shadow:0 6px 16px rgba(0,0,0,.25)}
.opt.correct{ outline:2px solid var(--good); background:#0f2c22 }
.opt.wrong{ outline:2px solid var(--bad); background:#2a1320 }
.inline-input{ width:100%; padding:10px 12px; border-radius:10px; background:#0e1432; color:#fff; border:1px solid rgba(255,255,255,.12) }
.explain{ color:#cde8ff; background:#0e1634; border:1px solid rgba(255,255,255,.07); padding:10px 12px; border-radius:10px; margin-top:10px }
.puzzle-item{ background:#101740; border:1px dashed rgba(255,255,255,.15); padding:8px 10px; border-radius:10px; margin:6px 0; display:flex; gap:8px; align-items:center; justify-content:space-between; }
.puzzle-move{ cursor:pointer; border:none; border-radius:8px; padding:6px 8px; background:#253074; color:#e3ecff }
.small{font-size:12px;color:#9fb1ff}

/* mentor bubble */
.mentor-fab{ position:fixed; right:18px; bottom:18px; background:linear-gradient(135deg,#7cf,#6fffc3); color:#031222; border:none; width:54px;height:54px;border-radius:50%;display:grid;place-items:center; box-shadow:var(--shadow); cursor:pointer; }
.mentor-panel{ position:fixed; right:18px; bottom:84px; width:320px; max-height:60vh; display:none; flex-direction:column; gap:8px; }
.mentor-panel.open{ display:flex; }
.chat{ background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px; overflow:auto; min-height:120px; max-height:46vh;}
.msg{ padding:8px 10px; border-radius:10px; margin:6px 0; }
.msg.me{ background:#0e1432; align-self:flex-end }
.msg.ai{ background:#0d2a38; border:1px solid rgba(124,255,255,.15) }
.chat input{ width:100%; }

/* toast & confetti */
.toast{ position:fixed; left:50%; transform:translate(-50%, 10px); top:10px; background:#0c1738; border:1px solid rgba(255,255,255,.15); color:#e7f4ff; padding:8px 12px; border-radius:10px; opacity:0; transition:all .25s ease; }
.toast.show{ opacity:1; transform:translate(-50%, 0) }
.confetti{ position:fixed; inset:0; pointer-events:none; z-index: 9999; }

/* Light theme overrides */
:root[data-theme="light"]{
  --bg:#f5f7ff; --panel:#ffffff; --card:#f9fbff; --ink:#0b1020;
  --muted:#465074; --accent:#0a84ff; --good:#0f9d58; --bad:#cc2936;
  --lock:#6b6f85; --gold:#b8860b; --shadow: 0 10px 28px rgba(0,0,0,.10);
}
:root[data-theme="light"] body{ background:linear-gradient(#f2f6ff,#e9efff) fixed; }
:root[data-theme="light"] .opt{ background:#f1f5ff; border-color:#d7dff6 }
:root[data-theme="light"] .inline-input{ background:#f1f4ff; color:#0b1020; border-color:#cfd7f3 }
:root[data-theme="light"] .explain{ background:#f3f6ff; color:#0b1020; border-color:#dfe6fb }
:root[data-theme="light"] .icon-btn{ border-color:#d5dcf4 }

