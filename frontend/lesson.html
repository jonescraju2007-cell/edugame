<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EduGame Lesson</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1 id="lesson-title">üìñ Lesson</h1>
    <nav>
      <button onclick="goWorlds()">üåç Worlds</button>
      <button onclick="toggleTheme()">üåô Toggle Theme</button>
    </nav>
  </header>

  <main>
    <section id="lesson-content">
      <p>Loading lesson...</p>
    </section>
    <button id="quiz-btn" onclick="startQuiz()">Start Quiz</button>
  </main>

  <script>
    async function loadLesson() {
      const worldFile = localStorage.getItem("currentWorld") || "world1.json";
      const res = await fetch(`./worlds/${worldFile}`);
      const data = await res.json();

      document.getElementById("lesson-title").innerText = data.meta.title;

      const container = document.getElementById("lesson-content");
      container.innerHTML = "";

      for (let key in data.lessons) {
        const lesson = data.lessons[key];
        const div = document.createElement("div");
        div.classList.add("lesson-card");
        div.innerHTML = `<h3>${lesson.title}</h3>${lesson.html}`;
        container.appendChild(div);
      }
    }

    function startQuiz() {
      window.location.href = "quiz.html";
    }

    function goWorlds() {
      window.location.href = "index.html";
    }

    function toggleTheme() {
      document.body.classList.toggle("dark");
    }

    loadLesson();
  </script>
</body>
</html>

